---
layout: post
title: Ускорение docker на macOS m1 без mutagen
---

Битва MacBook pro 14 на m1 (10+6) VS dell 7490 i5-8250u на ubuntu 22.04.
Одинаковое состояние проекта на всех этапах замеров - Symfony 5.4. Функциональные тесты запускаются в paratest.
php 8.1, PostgreSQL 12

![_config.yml]({{ site.baseurl }}/images/20230312/33d174530a5bdcec.png)

![_config.yml]({{ site.baseurl }}/images/20230312/dcd8b775172d90bc.png)

Как видим, из коробки всё выглядит печально, особенно для ноутбука за 200к руб. 
В интернете полно инструкций с mutagen, но есть вариант ускорения намного проще:

1. Добавляем ядра, по умолчанию используются не все
![_config.yml]({{ site.baseurl }}/images/20230312/0d591266b8d45fe4.png)
2. Меняем драйвер на VirtioFS
![_config.yml]({{ site.baseurl }}/images/20230312/ea8c01e0b5a0a303.png)

В итоге мы получаем ускорение больше чем X2 с минимальными трудозатратами.

![_config.yml]({{ site.baseurl }}/images/20230312/b8545ffcd33f948a.png)


### Вывод

Помни разработчик, что pc\laptop это всего лишь станок кодоразработческий. 10 раз подумай - "А подходит ли мне этот именитый станок?".
Это замечательно, когда сам не платишь за оборудование или есть требование по безопасности.
Но если его покупаешь сам, может оказаться, что распиаренный macBook pro M1 для backend php developer не лучший выбор.